# 5 大规模并发

## 异常传递

出现异常时系统需要传达几个关键的信息：

- 发生了什么
- 发生在什么时间、什么位置
- 对用户友好的信息
- 告诉用户如何获得更多信息

所有异常都几乎能归为两种分类：

- bug：是未在系统中定义的异常，或者一些“原生”的异常，就是极少遇到的情况
- 已知信息(例如：网络连接断开、磁盘写入失败等)

## 超时和取消

并发程序为什么支持取消：

- 系统饱和：关于何时应当超时的一般性指导
  - 请求在超时时不太可能重复
  - 没有资源来存储请求(比如，内存队列的内存，持久队列的磁盘空间)
  - 对系统的响应或请求发送数据有时效性的要求
- 陈旧的数据
- 试图防止死锁

## 心跳

两种类型的心跳：

- 在一段时间间隔内发出的心跳
- 在工作单元开始时发出的心跳
